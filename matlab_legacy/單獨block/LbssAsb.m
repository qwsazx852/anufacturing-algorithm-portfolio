function SS = LbssAsb(s,T1,T22); %計算適應值(f1利潤)
CR=0.7;%碳足跡設定範圍
% % %% 拆裝時間 利潤計算
s=[13 11 14 12 15 1 2 3 18 16 17 7 6 5 9 8 4 10];
asb=[18];
a=[];
add=0;
ans=[];
Dc=[18	10	16	17	3	14	2	9	5	6	7	15	11	12	13	1	8	4];%liaison零件關係
DC2=[0.9297	0.911	0.797	0.797	0.797	0.797	0.482	0.294	0.266	0.266	0.224	0.1727	0.1727	0.1727	0.1354	0.0234	0.0234	0.0234];%liaison單一零件組拆裝成本
gw=[0.015,0.005,0.003,0.008,0.0025,0.003,0.0013,0.006,0.002,0.003,0.002,0.009,0.0021,0.0012,0.0025,0.003,0.003,0.004];%各零件重量
reuse=[2 5 7 9 13];% 重新使用
recycle=[3  10  14 16 17 18];%回收
Remanufacturing=[4 6 8 11 12];%重新加工
c=7.2844;%拆裝總成本
mc=[25     5     2    25    10     8     7    10     8     2     5    20     5     5     7     2     2     2];%各零件成本
add=0;

SS=[];
%%碳足跡
reuse=[2 5 7 9 13];% 重新使用
recycle=[3  10  14 16 17 18];%回收
Remanufacturing=[4 6 8 11 12];%重新加工
asb2=[1];
Cs=0.509;%% 碳係數/s0.0001413889
gw=[0.015,0.005,0.003,0.008,0.0025,0.003,0.0013,0.006,0.002,0.003,0.002,0.009,0.0021,0.0012,0.0025,0.003,0.003,0.004];%各零件重量
cc=[0.310000000000000	0.310000000000000	0.430000000000000	0.430000000000000	0.120000000000000	0.430000000000000	0.120000000000000	0.310000000000000	0.430000000000000	0.430000000000000	0.310000000000000	0.310000000000000	0.120000000000000	0.310000000000000	0.310000000000000	0.310000000000000	0.310000000000000	0.430000000000000];

%% 吊扇
% asb=[13];
% a=[];
% add=0;
% ans=[];
% Dc=[13 7 18 7 18 4 1 2 3 4 14 13 14 8 9 22 24 10 14 10 14 22 23 24 7 18  ];%liaison零件關係
% DC2=[0.9297	0.911	0.797	0.797	0.797	0.797	0.482	0.294	0.266	0.266	0.224	0.1727	0.1727	0.1727	0.1354	0.0234	0.0234	0.0234 0.224	0.1727	0.1727	0.1727	0.1354	0.0234	0.0234	0.0234];%liaison單一零件組拆裝成本
% gw=[0.161;0.026;0.081;0.0127;0.002;0.002;0.407;0.006;0.006;0.305;0.006;0.006;1.356;0.389;0.006;0.006;0.305;0.201;0.006;0.006;0.006;0.168;0.168;0.168;0.007;0.0061];%四種類  材料 重量
% %各零件重量
% reuse=[3 4 7 10 13 14 17 18 25];% 重新使用
% recycle=[5 6 8 9 11 12 19 20 21];%回收
% Remanufacturing=[1 2 26];%重新加工
% c=141.133;%拆裝總成本
% mc=[50,10,40,70,5,5,220,4,4,300,4,4,350,250,2,2,100,120,4,4,4,200,200,200,40,40]; %新零件成本00
% add=0;
% 
% SS=[];
%% 印表機
% asb=[50];
% a=[];
% add=0;
% ans=[];
% Dc=[1	2	3	4	5	6	7	8	9	10	11	12	13	14	15	16	17	18	19	20	21	22	23	24	25	26	27	28	29	30	31	32	33	34	35	36	37	38	39	40	41	42	43	44	45	46	47	48	49	50	51	52];%liaison零件關係
% DC2=[0.9297	0.911	0.797	0.797	0.797	0.797	0.482	0.294	0.266	0.266	0.224	0.1727	0.1727	0.1727	0.1354	0.0234	0.0234	0.0234 0.224	0.1727	0.1727	0.1727	0.1354	0.0234	0.0234	0.0234 0.9297	0.911	0.797	0.797	0.797	0.797	0.482	0.294	0.266	0.266	0.224	0.1727	0.1727	0.1727	0.1354	0.0234	0.0234	0.0234 0.224	0.1727	0.1727	0.1727	0.1354	0.0234	0.0234	0.0234];
% gw=[0.5395;0.0210;0.0043;0.1560;0.1230;0.0530;0.0020;0.0120;0.0042;0.0900;0.0030; 0.0122;0.0132;0.0034;0.0225;0.2672;0.0031;0.0170;0.0005;0.0005;0.0030;0.0030;0.0001;0.0030;0.0030;0.0002;0.2697;0.0150;20.0350;0.0020;0.1540;0.0025;0.0025;0.0025;0.0025;0.0980;0.0030;0.0220;0.0900;0.0041;0.0041;0.0041;0.0041;0.0010;0.7110;0.1621;0.0813;0.0231;0.5897;0.5342;0.0893;0.0743];%四種類  材料 重量
% %各零件重量
% reuse=[1 4 5 6 7 8 9 10 11 14 16 17 18 23 24 25 26 27 29 31 32 33 34 35 36 37 39 45 47 48 49 50 51 52];% 重新使用
% recycle=[7 19 20 23 28 30 44];%回收
% Remanufacturing=[15 38 40 41 42 43 21 22 13 12 46];%重新加工
% c=195.5464;%拆裝總成本
% mc=[90,20,20,100,30,100,100,75,66,35,2,6,6,10,300,200,5,2,3,3,6,6,3,4,4,1,80,80,3,120,12,5,5,5,5,30,25,300,80,6,6,6,6,25,45,6,30,90,30,30,35,650]; %新零件成本00
% add=0;
% SS=[];

%% STEP1選拆零件上下限
limit=sum(gw).*CR
p=0
for i =1:length(s)
p=p+gw(s(i))
if p >=limit
    rang=i
    break
end
end
savea=[]
for i =2:rang
  %% 選拆後利潤
%   for i =1:length(s)
add=0;
%       RR=s(i,:);


d1=s(1:i)
d=s(i+1:end)

   
 %% 拆卸成本
        for j =1:length(Dc)
            a=find(d1==Dc(j))
            if a>=1
                add=add+DC2(j)
            end
        end
        
        for j =1:length(d1)
%% 加工成本%% remanufact
n=0;
      for j1 =1:length(Remanufacturing)
          a=find(d1==Remanufacturing(j1));
          if a>1
          n=n+1;
          end
      end
            add=add+1.5.*n%%加工係數

        end
%% 新零件成本      
        new=sum(mc(d));
       add=add+new

%% 回收利益
      get=sum(gw(d)).*0.005%%%%%%%%%%目前只算廢棄零件回收 5元/kg




%% recycle
   %% 拆解之碳足跡
  cf=sum(gw(d1)).*Cs;%%%%%%%%%目前只算拆解零件之碳足跡
  %% 購入零件之碳足跡
 cp=0;
%% 再加工之碳足跡
cm=0;
for j =1:length(Remanufacturing)
    a=find(d1==Remanufacturing(j));
    if a>=1
        cm=cm+gw(d1(a)).*cc(d1(a));
    end
end
%% 再回收之碳足跡
cy=0;






%% 工具方向變換
DC=48;
[SS1,SSS,SS2] = LBss1(s,T1,T22)%右變換次數，中時間成碳係數,左時間
DC=DC+SS1;
timescore=(DC.*0.049)+5.0306


f1=300-(add+timescore)+get;
f2=cf+cp+cm+cy+SSS;
savea=[savea;f1,f2]

  end
SS=[SS, savea(find(savea(:,1)==max(savea(:,1))),:)]






% LC=60;
% DC=48;
% SS=[];
% for i =1:chromosome
% %% 拆裝時間
% SS1=b(i);
% LC=LC+SS1;
% %% 組裝時間
% SS2=b2(i);
% DC=DC+SS2;
% %% 成本
% DAC =((LC./60)+0.448+3.838)+((DC./60)+5.0306);%組拆成本
% NP=150-(19.5.*0.13);% 新零件成本
% recycle_p=89.*0.065;%可回收零件
% %% 利潤
% SS=[SS,(300+recycle_p)-(DAC+NP)];
end